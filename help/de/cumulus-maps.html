<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//DE">
<html>
<head>
  <title>Cumulus Karten</title>
</head>
<body>

    <table width="100%">
    <tr>
    <td align="left"><a href="cumulus-gettingstarted.html">zur&uuml;ck</a></td>
    <td align="center"><a href="cumulus.html">Anfang</a></td>
    <td align="right"><a href="cumulus-settings.html">weiter</a></td>
    </tr>
    </table>

<h3 align="center">Karten</h3>

    <p>Cumulus benutzt die gleichen Karten wie KFLog. Sie sind frei
    verf&uuml;gbar und k&ouml;nnen von
    <A HREF="http://www.kflog.org/maproom">www.kflog.org/maproom</A>
    heruntergeladen werden. Um die besten Ergebnisse zu erzielen,
    ben&ouml;tigen Sie alle Kartenarten, die dort zu finden sind.

    <p>Dies sind:

    <ul>
        <li><a href="http://www.kflog.org/maproom/ground-and-terrain-data">Bodenkarten</a>
        (ground) mit Merkmalen wie Stra&szlig;en, St&auml;dten, Fl&uuml;ssen und Gel&auml;ndekarten (terrain)
        mit H&ouml;henangaben</li>
        
        <li>Luftr&auml;ume (airspace), <b>Nicht mehr unterst&uuml;tzt! Benutzen Sie andere Alternativen,
            z.B. <a href="http://www.segelflug.de/segelflieger/michael.meier/download/OPENAIR.TXT">OPENAIR.TXT</a></b></li>

        <li>Flugpl&auml;tze (airfields), <b>Nicht mehr unterst&uuml;tzt! Benutzen Sie die Welt2000 Datenbasis,
            <a href="#Welt2000">Welt2000</a></b></li>
    </ul>

    Installieren Sie nur die Luftraum- und Flugplatzdateien des
    Gebietes, in dem Sie fliegen wollen, da Cumulus ansonsten
    un&ouml;tig viel Speicher verbraucht. Dies kann sich auch negativ
    auf die Arbeitsgeschwindigkeit auswirken. Die Bodenkarten sind
    davon nicht betroffen. Es werden nur immer diejenigen geladen, die
    auch gerade ben&ouml;tigt werden.

    <p>
    Die Karten k&ouml;nnen in drei Verzeichnissen installiert werden:
    <ul>
      <li>In $HOME/maps/
      </li>
      <li>Im Installationsverzeichnis unter /opt/cumulus/maps.</li>
      <li>Irgendwo z.B. auf der MMC. Unter Maemo (Nokia Internet Tablet) ist es empfehlenswert, diesen Ort zu benutzen, da der interne Speicher begrenzt ist.</li>
    </ul>
    </p>

    <p>Wenn Sie die Karten auf der SD Karte installieren, so m&uumlig;ssen Sie
    anschlie&szlig;end auf der Kartenkonfigurationsseite den Pfad zum Wurzelverzeichnis
    der installierten Karten eintragen. Dr&uumlig;cken Sie dazu auf den Knopf Karten oben links
    in der Ecke und navigieren Sie zu Ihrem Installationsverzeichnis, wo die Karten zu finden sind.
    Diese speichern Sie bitte ab. Ist kein Pfad gesetzt, so werden die Karten in $HOME/maps and
    /opt/cumulus/maps gesucht.

    <p>
    Die Bodenkarten sind im Unterverzeichnis <i>landscape</i> von <i>maps</i> abzulegen.
    Die Flugplatz- und Luftraumdateien sind in 
    Unterverzeichnissen von <i>maps</i> mit den Namen <i>airfields</i>
    bzw. <i>airspaces</i> zu speichern.

    <p>Wenn Sie Speicherprobleme beim Betrieb von Cumulus bekommen,
    k&ouml;nnen Sie sich entscheiden, bestimmte Kartenarten nicht zu
    installieren.  Sie k&ouml;nnen z.B. auf die Oberfl&auml;chenkarten
    (terrain files) verzichten.  Dadurch wird das Zeichnen der
    Gel&auml;ndeh&ouml;he unterdr&uuml;ckt, daf&uuml;r sparen Sie aber
    Speicherplatz und beschleunigen das Laden der Karten. Es ist
    empfehlenswert, zumindest die Bodenkarten zu installieren, da
    sonst nur ein blauer Hintergrund angezeigt wird, was die
    Navigation nicht gerade erleichtert.
    <p>
    Die von Ihnen installierten Karten sind Rohdaten und noch nicht
    auf eine bestimmte Projektion zugeschnitten. Das wird erst
    w&auml;hrend des erstmaligen Ladens gemacht. Dabei werden die
    Kartendaten in das neue Format umgerechnet und in diesem auch als
    <i>.kfc</i> oder <i>.txc</i> Dateien gespeichert. Dieser Vorgang
    nimmt einige Zeit in Anspruch, hat aber den Vorteil, das die neuen
    Dateien kleiner sind und dann auch schneller geladen werden
    k&ouml;nnen. In dem Men&uuml; <a
    href="cumulus-settings-map-advanced.html"> Einstellungen Karten,
    Weitere Optionen</a> k&ouml;nnen Sie die Projektionsart und das
    L&ouml;schen der Originalkarten nach dem Kompilieren einstellen.

    <p><b>OpenAir Luftraumdateien</b></p>

    Cumulus kann nur Luftraumdateien im OpenAir Format lesen.
    Installieren sie diese Dateien im Unterverzeichnis <i>airspaces</i> 
    und versehen sie
    diese mit der <b>klein</b> geschrieben Endung <i>.txt</i>.
    Cumulus benutzt bei den Luftraumdateien standardm&auml;&szlig;ig
    die selbe interne Zuordnung der Luftraumelemente wie bei den KFLog
    Dateien. Da sich aber bestimmte OpenAir Elemente nicht eindeutig
    zuordnen lassen, bietet Cumulus einen zus&auml;tzlichen Mapping
    Service an. Dazu ist eine Beschreibungsdatei zu erstellen und
    diese im gleichen Verzeichnis wie die zugeh&ouml;rige OpenAir
    Luftraumdatei abzulegen. Diese Datei muss den selben Basisnamen
    (ohne <i>.txt</i> Endung) tragen wie die Originaldatei und ist
    dann mit der Kennung <i>_mappings.conf</i> zu erweitern.</p>

    <P>Beispiel: QuellDatei=<i>openair.txt</i>, MappingDatei=<i>openair_mappings.conf</i></p>

    <p>F&uuml;r seine interne Zuordnung verwendet Cumulus die folgenden
    Elemente:

      <ul>
      <li>AirA
      <li>AirB
      <li>AirC
      <li>AirD
      <li>AirE
      <li>AirF
      <li>ControlC
      <li>ControlD
      <li>Danger
      <li>Restricted
      <li>LowFlight
      <li>Tmz
      <li>GliderSector
      <li>WaveWindow
      </ul>

    Die Syntax f&uuml;r eine Mapping Datei sieht folgenderma&szlig;en
    aus. Leerzeilen und Zeilen die mit <i>#</i> or <i>*</i> beginnen
    (Kommentarzeilen) werden ignoriert. Alle anderen Zeilen sollten
    die Form <i>Name = Wert</i> haben, immer ein solcher Eintrag pro
    Zeile. <i>Name</i> ist der Luftraumtyp aus der OpenAir Datei und
    <i>Wert</i> die entsprechende Luftraumzuweisung f&uuml;r
    Cumulus. Die Standardzuordnung ist folgenderma&szlig;en:

    <ul>
	  <li>A = AirA
	  <li>B = AirB
	  <li>C = AirC
	  <li>D = AirD
	  <li>E = AirE
	  <li>F = AirF
	  <li>GP = Restricted
	  <li>R = Restricted
	  <li>TRA = Restricted
	  <li>Q = Danger
	  <li>CTR = ControlC
	  <li>TMZ = Tmz
	  <li>GSEC = GliderSector
	  <li>W = WaveWindow
    </ul>

    <p>Zum &auml;ndern m&uuml;ssen nur die Elemente neu definiert
    werden, die eine andere Zuordnung erhalten sollen. Diese
    &uuml;berschreiben dann die Standardzuordnung.</p>

    <P>Beispiel: <i>CTR=ControlD</i></p>

    <P>Hiermit wird die Standardzuordnung von <i>CTR</i> zu
    <i>ControlC</i> auf <i>ControlD</i> ge&auml;ndert.</p>

    <p><b>Achten Sie auch auf die korrekte Schreibweise, alle
    Zuordnungen sind davon abh&auml;gig.</b>

<a name="Welt2000"></a>

    <p><b>Benutzung von Welt 2000 Flugplatzdaten</b></p>

    <p>Die Flugplatzdaten werden von Cumulus aus der Welt
    2000 Datei gelesen. Diese
    wird von Michael Meier als eine gro&szlig;e Datei 

    <a href="http://www.segelflug.de/segelflieger/michael.meier/download/WELT2000.TXT">hier</a>

    bereit gestellt. Installieren sie diese Datei im 
    Unterverzeichnis <i>airfields</i>  unter den Namen
    <i>welt2000.txt</i>. Da eine Welt 2000 Datei die
    ganze Welt beinhaltet, ist es erforderlich, die eingelesene
    Datenmenge sinvoll zu begrenzen um einen Speicher&uuml;berlauf in
    Cumulus zu vermeiden. Cumulus bietet dazu zwei Wege an:</p>

    <ul>
      <li>Filtern nach L&auml;ndern, die Sie unter dem Men&uuml; <a
      href="cumulus-settings-map-advanced.html#Welt2000Filter">
      Einstellungen Karten, Weitere Optionen</a> eingeben
      k&ouml;nnen. Dies sollte der bevorzugte Weg sein.

      <li>Filtern nach L&auml;ndern, die in einer Konfigurationsdatei
      mit dem Namen <i>welt2000.conf</i> definiert sind. Siehe weiter
      unten, wie man das macht. Dies ist eine alte Option und sie
      sollte nicht mehr verwendet werden. Verfahren Sie bitte nach dem
      vorhergehenden Punkt. <b>Achtung!</b> Eine Filterregel, die ï¿½ber
      die Cumulus Oberfl&auml;che gemacht wird, &uuml;berschreibt die
      Filterregel aus der Konfigurationsdatei.
    </ul>

    <p>Ein Nachteil ist, dass Welt 2000 nur 3 Typen von
    Flugpl&auml;tzen kennt (Flugplatz, Segelfluggel&auml;nde,
    UL-Platz) aber Cumulus eine Menge mehr. Dieses Defizit wird
    &uuml;ber eine zus&auml;tzliche Zuordnungsm&ouml;glichkeit f&uuml;r
    ICAO Kenner und Kurznamen von Welt 2000 Eintr&auml;gen zu Cumulus
    Kartenelementen wieder ausgeglichen. In einer Konfigurationsdatei
    mit dem Namen <i>welt2000.conf</i> kann man entsprechende Regeln
    daf&uuml;r definieren. Diese Datei ist in dem selben Directory zu
    installieren, im dem auch die welt2000.txt Datei zu finden
    ist. Folgende Syntax Konstrukte werden dabei unterst&uuml;tzt:

    <ul>
    <li> Eine Kommentarzeile beginnt mit einem <i>#</i> Raute- oder <i>$</i>
    Dollarzeichen und endet mit den Zeilenende.

    <li><b>FILTER countries=</b><i>land1_1[,...,land_n]</i>

    <br>Diese Zeile definiert eine L&auml;nderfilter
    Regel. Verschiedene L&auml;nder k&ouml;nnen hintereinander durch
    Kommas getrennt angegeben werden. Die L&auml;nderkennungen sind
    nach ISO-3166 kodiert. Falls eine solche Filterregel definiert
    wurde, werden nur die darin aufgef&uuml;hrten L&auml;nder aus der
    Welt 2000 Quelldatei extrahiert. Dies sollte als der &uuml;bliche
    Weg benutzt werden, um die gew&uuml;nschten Flugpl&auml;tze in
    Cumulus einzulesen. Es ist m&ouml;glich, mehr als eine Filterregel
    zu definieren.

    <li><b>MAP_SHORT_NAME</b> <i>kurz-name</i>=<i>cumulus-karten-element</i>

    <br>Diese Zeile definiert eine Regel um einem Kurznamen (ersten
    sechs links stehenden Zeichen) eines Welt 2000 Eintrages ein
    bestimmtes Cumulus Kartenelement zuzuweisen.

    <li><b>MAP_ICAO</b> <i>icao-zeichen</i>=<i>cumulus-karten-element</i>

    <br>Diese Zeile definiert eine Regel um einem ICAO Zeichen eines
    Welt 2000 Eintrages ein bestimmtes Cumulus Kartenelement
    zuzuweisen.
    </ul>

    Cumulus &uuml;nterst&uuml;tzt die folgenden Kartenelemente
    f&uuml;r Flugpl&auml;tzte:

    <ul>
    <li>IntAirport
    <li>Airport
    <li>MilAirport
    <li>CivMilAirport
    <li>Airfield
    <li>ClosedAirfield
    <li>CivHeliport
    <li>MilHeliport
    <li>AmbHeliport
    <li>Glidersite
    <li>UltraLight
    <li>HangGlider
    </ul>

    <b>Beachten Sie bitte, dass die Kartenelemente in der richtigen
    Gro&szlig;-Klein-Schreibweise in den Zuweisungen verwendet werden,
    damit sie auch funktionieren!</b>

    <p>Kurzbeispiel f&uuml;r eine  <i>welt2000.conf</i> Datei:

    <p># Beispiel einer welt2000.conf Datei, beginnend mit einer Kommentarzeile
    <br>$ Dies ist ebenfalls eine Kommentarzeile
    <br>#
    <br># Es folgt eine L&auml;nderfilter Regel
    <br># Nur die  L&auml;nder Deutschland, Polen und Tschechien werden aus der welt2000.txt Quelle extrahiert
    <br>FILTER countries=de,pl,cz
    <br>#
    <br># Es folgt eine ICAO Zuweisungsregel
    <br># Dem deutschen int. Flugplatz Berlin-Sch&ouml;nefeld wird der Type IntAirport zugewiesen
    <br>MAP_ICAO EDDB=IntAirport
    <br>#
    <br># Es folgt eine Kurznamen Zuweisungsregel
    <br># Dem deutschen Milit&auml;rflugplatz Holzdorf wird der Type MilAirport zugewiesen
    <br>MAP_SHORT_NAME HOLZD1=MilAirport

    <p><b>Bitte beachten Sie folgendes!</b> Wenn eine neue welt2000.txt
    Datei installiert wurde, kann der erste Aufruf von Cumulus danach
    etwas l&auml;nger brauchen (ca. 20-40s) bis die gew&uuml;nschten
    Daten daraus extrahiert sind. Cumulus generiert aus den
    extrahierten Daten eine komprimierte Datei, die beim n&auml;chsten
    Start dann verwendet wird. Diese Datei tr&auml;gt den Namen
    <i>welt2000.txc</i> und wird solange benutzt, wie die
    Originaldatei, die Konfigurationsdatei, die Kartenprojektion oder
    die Heimatposition nicht ge&auml;ndert werden. Das minimiert die
    Einlesezeit nach einem Restart.

    <p>Falls Sie erforderliche Korrekturen an Eintr&auml;gen in der
    Welt 2000 Datei vornehmen, so melden Sie diese bitte auch an
    Michael Meier, der die Quelle bereit stellt und pflegt. Seine
    Emailadresse ist im Kopfteil der Welt 2000 Datei zu finden.

    <p><table width="100%">
    <tr>
    <td align="left"><a href="cumulus-gettingstarted.html">zur&uuml;ck</a></td>
    <td align="center"><a href="cumulus.html">Anfang</a></td>
    <td align="right"><a href="cumulus-settings.html">weiter</a></td>
    </tr>
    </table>
</body>
</html>
