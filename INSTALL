===============================================================================
Building and installing Cumulus under X11 and Qt4.x for Linux/Unix

Last update: 2009-03-10 by Axel Pauli

SVN info: $Id$
===============================================================================

These are the instructions to build and install Cumulus from source under
Linux/Unix.

Step 1)

You will need to set up a build environment for Qt4.x under X11.
If it is already available you can continue with step 2)

Otherwise download a X11/Qt release from ftp.trolltech.com/qt/source.
I recommend the release:

ftp://ftp.trolltech.com/qt/source/qt-x11-opensource-src-4.5.1.tar.bz2

I did the development with this release. To install it follow the instructions
of Trolltech. For Cumulus you need the standard Qt4 libraries. If you want to
debug cumulus together with Qt it is recommend to activate the debug option
during run of the configure script.

If you want to use your own built Qt version, you should add the
<QT_INSTALLDIR>/bin component at the first position of your PATH variable.

e.g. BASH example

	export $PATH=<QT_INSTALLDIR>/bin:$PATH

Step 2)

Check, if you can call 'qmake --version' from a shell command line. You should see some output like this:

   QMake version 2.01a
   Using Qt version 4.5.1 in ...
   
In this case Qt is right installed. If the call fails, check the PATH variable for containing Qt bin directory.

To checkout the source tree from the subversion archive you need an installed
subversion client on your Linux desktop. If the command svn ... fails you do not
have installed subversion. Alternatively you can download a snapshot tar ball.
See below how to do this.

Checkout a cumulus snapshot file tree in a local directory of your Linux desktop
from the subversion archive with:

	a) svn co https://svn.kflog.org/svn/repos/cumulus/qt4/trunk
	b) svn export https://svn.kflog.org/svn/repos/cumulus/qt4/trunk

Variant b) is free from any svn overhead like .svn directories.

You can also download a snapshot tar ball by using this link:

  http://www.kflog.org/fileadmin/user_upload/cumulus_snapshots/CumulusQt4-snapshot.tbz
  
  Copy the tar ball in a local directory of your Linux desktop and extract it with:
  
  tar jxvf CumulusQt4-snapshot.tbz

Step 3)

Go into the trunk directory of your checkout copy. To build the cumulus
application issue the following command:

	make -f Makefile.X11
	
	The following make targets are available:
	
	all      Builds all parts of cumulus
	clean    Cleans the build area and removes all generated objects.
	         Use it after done modifications of qmake project files.
	install  Install cumulus under $(INSTALL_ROOT), normally /opt/cumulus

Step 4)

To install cumulus issue the following command:

	make -f Makefile.X11 install

The installation structure of Cumulus is oriented on the Filesystem Hierarchy
Standard of Unix (www.pathname.com/fhs). The default installation directory of
the Cumulus application is therefore /opt/cumulus. Normally you need root access
to do the installation there. If you would prefer another installation place,
you can change the installation directory during call of 'make install' in the
following way:

	make -f Makefile.X11 INSTALL_ROOT=<my-install-path> install

Step 5)

The needed map data (airfields, airspaces and landscape) have to be installed
under:

$HOME/maps or $INSTALL_ROOT/maps

That are the places, where Cumulus will seek for.

The directory structure looks like

         +-/airfields/ (Only Welt 2000 data file is supported)
.../maps/+-/airspaces/ (Only OpenAir file format is supported)
         +-/landscape/ (Use map data from KFLog's map room)

Note, that cumulus does support airspace files only in openair
format and as airfield file the welt2000 data file. The former support of
KFLog airspace and airfield files has been removed.

For airfields the welt 2000 data base has to be used. See cumulus help under
trunk/help/en/index.html for more information how to get it.

The landscape files can be downloaded from the KFLog Map room. Follow the link
below to get them.

http://www.kflog.org/maproom/ground-and-terrain-data

Step 6)

To start cumulus issue the command:

	$INSTALL_PATH/bin/cumulus

Personal stuff is stored under $HOME/cumulus. There you can find the task file
'tasks.tsk' and the waypoint file 'cumulus.kwp'

The cumulus configuration file is stored under $HOME/.config/Cumulus.conf.

Step 7)

Usage of NMEA Simulator

Under $INSTALL_ROOT/bin you can find a NMEA simulator with name 'nmeaSimu'. You
can use it for generation of NMEA data. Call it without any arguments and you
will get a help usage displayed. The output of the simulator is written in a
named pipe. Select in Cumulus as GPS device /tmp/nmeasim and cumulus will read
the data from the simulator.

Hints, improvements or help are always welcome. Please contact the maintainer of
Cumulus, Axel Pauli, via email axel@kflog.org or use the mailing lists of KFLog
to find under www.kflog.org/mailman/listinfo.

Have fun with cumulus ...

===============================================================================
Licence of Cumulus
===============================================================================

This program is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any later
version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License
(www.gnu.org/copyleft/gpl.html) for more details.
